{% extends 'base.html' %}

{% block styles -%}
<link rel="stylesheet" href="{% static 'styles/app.scss' %}">
{% endblock styles -%}

{% block scripts %}
{% script 'detail' %}
{% endblock scripts %}

{% block content %}
<article class="word-detail">
  <div class="back-link">
    <a href="/">&larr; All terms</a>
  </div>

  <h2 class="detail--word">{{ obj.word }}</h2>
  <div class="detail--type">{{ obj.type }}</div>
  <hr class="detail--divider" />

  <div class="detail--definitions">
    {% for definition in obj.definition_list %}
      <div class="detail--definition-text">
        {% if obj.definition_list|length > 1 %}<sup>{{ loop.index }}</sup> {% endif %}{{ definition.text|markdown }}
      </div>
      {% for use in definition.in_use %}
        <div class="detail--in-use">
          <q>{{ use.text|italicize(obj.word)|markdownInline }}</q>
          <span class="detail--in-use-source">
            {% if use.url and use.source %}
              &mdash; <a href="{{ use.url }}">{{ use.source }}</a>
            {% elif use.source %}
              &mdash; {{ use.source }}
            {% endif %}
          </span>
        </div>
      {% endfor %}
    {% endfor %}
    {% if obj.author %}
      <div class="detail--author">
        Entry by {{ obj.author }}
        {% if obj.last_updated %} &middot; {{ obj.last_updated }}{% endif %}
      </div>
    {% endif %}
  </div>

  <div class="detail--actions">
    <a aria-label="Flag" href="https://github.com/ryan-serpico/aiglossary.news/issues/new?assignees=palewire&labels=bug&template=flag-an-error.yaml&title=Error%20with%20{{ obj.word|escape }}&word={{ obj.word|escape }}">
      <svg width="13" height="13" viewBox="0 0 24 24"><path d="M14.4,6L14,4H5V21H7V14H12.6L13,16H20V6H14.4Z" fill="currentColor"/></svg>
      Flag
    </a>
    <a href="https://github.com/ryan-serpico/aiglossary.news/commits/main/_data/dictionary/{{ obj.word|slugify }}.yaml">Changelog</a>
    <div id="card--share" class="display-none">
      <a aria-label="Share" style="cursor:pointer;">
        <svg width="13" height="13" viewBox="0 0 24 24"><path d="M21,12L14,5V9C7,10 4,15 3,20C5.5,16.5 9,14.9 14,14.9V19L21,12Z" fill="currentColor"/></svg>
        Share
      </a>
    </div>
  </div>

  <div class="detail--about">
    <a href="/about/">About this glossary</a> &mdash; who's behind this site and how you can contribute.
  </div>

  {% if prevTerm or nextTerm %}
  <nav class="detail--prev-next">
    {% if prevTerm %}
      <a href="/{{ prevTerm.word|slugify }}/" class="detail--prev">
        <span class="detail--prev-next-label">&larr; Previous</span>
        <span class="detail--prev-next-word">{{ prevTerm.word }}</span>
      </a>
    {% else %}
      <div></div>
    {% endif %}
    {% if nextTerm %}
      <a href="/{{ nextTerm.word|slugify }}/" class="detail--next">
        <span class="detail--prev-next-label">Next &rarr;</span>
        <span class="detail--prev-next-word">{{ nextTerm.word }}</span>
      </a>
    {% else %}
      <div></div>
    {% endif %}
  </nav>
  {% endif %}
</article>
{% endblock content %}
